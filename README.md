# Оптимизация хэш таблицы

Хеш таблица имеет открытый тип и состоит из слов на английском языке, для её заполнения используются 7 томов Гарри Поттера, а для стресс теста файл с часто употребляемыми словами.

Целью данной работы является создание хеш таблицы, использование различных хэш функций и изучение различных сопосбов оптимизации языка С на примере таблицы.

## Описание работы

 Для определения нагруженных мест в программе используется профайлер callgrind, а для оценки оптимизации rdtsc.
 
Тестирование представляет из себя вызов функции `void run_test(hash_table *hash_table, struct buffer *buffer, int epoch)`, принимающей в себя  буффер из слов для поиска в хеш таблице и n кратном повторении этой о перации.
 
 ##### 1 этап
 Попробуем запустить профайлер на тесте неоптимизированной таблицы, используя хеш crc32.

 !(https://github.com/levasemin/hash/blob/master/images/Screenshot%20from%202022-05-07%2023-00-17.png)
 
 Как видим, самым нагруженным местом является функция `uint hash_crc32(const char *key)`, которая вычисляет хеш,что в принципе логично, ведь она вызывается
 каждый раз, когда мы начинаем искать какое-то слово, чтобы узнать место списка в хеш таблице. Попробуем её оптимизировать. 
 
 Скорость составила 7689831940 тиков. 
  
  ##### 2 этап
  
  Заменена функция `uint hash_crc32(const char *key)` на `uint hash_crc32_intr(const char *key)`, использующая intrinsic функцию `unsigned __int64 _mm_crc32_u64 (unsigned __int64 crc, unsigned __int64 v)`. Посмотрим, как на это отреагирует профайлер и насколько ускорится программа.
